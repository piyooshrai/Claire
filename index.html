<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claire AI - Digital Labor Platform</title>
    <meta name="description" content="Claire is a digital labor platform that automates workflows across Healthcare, Legal, Finance, and Hospitality. Interview Claire for your team today.">
    <meta property="og:title" content="Claire AI - Digital Labor Platform">
    <meta property="og:description" content="AI-powered digital labor for Healthcare, Legal, Finance, and Hospitality. 24/7 availability, zero turnover, reasoning over scripting.">
    <meta property="og:type" content="website">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #999999;
            --accent: #ffffff;
            --border: #333333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1.0625rem;
            line-height: 1.8;
            transition: background 0.6s ease, color 0.6s ease;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
            animation: breathe 8s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.02);
            }
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(var(--border) 1px, transparent 1px),
                linear-gradient(90deg, var(--border) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            opacity: 0.3;
            z-index: 0;
            animation: gridPulse 6s ease-in-out infinite;
        }

        @keyframes gridPulse {
            0%, 100% {
                opacity: 0.2;
            }
            50% {
                opacity: 0.4;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 1;
        }

        /* Chat Interface */
        .chat-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-box {
            width: 100%;
            max-width: 800px;
            padding: 3rem;
        }

        .chat-message {
            margin-bottom: 2rem;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.claire {
            color: var(--text-primary);
            font-size: 1.125rem;
        }

        .chat-message.user {
            color: var(--accent);
            font-weight: 500;
        }

        .input-field {
            width: 100%;
            padding: 1.5rem;
            border: 1px solid var(--accent);
            background: transparent;
            color: var(--text-primary);
            font-size: 1.125rem;
            font-family: inherit;
            margin-top: 1rem;
            outline: none;
        }

        .input-field::placeholder {
            color: var(--text-secondary);
        }

        .industry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .industry-btn {
            padding: 2rem;
            border: 1px solid var(--accent);
            background: transparent;
            color: var(--text-primary);
            font-family: inherit;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .industry-btn:hover {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .industry-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .industry-desc {
            font-size: 0.9375rem;
            opacity: 0.7;
        }

        /* Typing indicator */
        .typing-indicator {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem 0;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typingBounce {
            0%, 80%, 100% {
                opacity: 0.3;
                transform: scale(0.8);
            }
            40% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @media (max-width: 768px) {
            .chat-box {
                padding: 2rem 1.5rem;
            }

            .industry-grid {
                grid-template-columns: 1fr;
            }

            .industry-name {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>
    <div class="grid-overlay"></div>

    <div class="chat-container" id="chat-container">
        <div class="chat-box" id="chat-box"></div>
    </div>

    <script>
        let userName = '';
        let userLocation = '';
        let userEmail = '';

        async function type(element, text, speed = 40) {
            for (let char of text) {
                element.textContent += char;
                await new Promise(r => setTimeout(r, speed + Math.random() * 20));
            }
        }

        async function pause(ms = 1000) {
            await new Promise(r => setTimeout(r, ms));
        }

        function addMessage(text, className = 'claire') {
            const msg = document.createElement('div');
            msg.className = `chat-message ${className}`;
            if (text) msg.textContent = text;
            document.getElementById('chat-box').appendChild(msg);

            // Auto-scroll to keep new messages visible and centered
            setTimeout(() => {
                msg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);

            return msg;
        }

        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'chat-message claire typing-indicator';
            indicator.id = 'typing-indicator';
            indicator.innerHTML = '<span></span><span></span><span></span>';
            document.getElementById('chat-box').appendChild(indicator);

            // Auto-scroll to indicator
            setTimeout(() => {
                indicator.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);

            return indicator;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        async function detectLocation() {
            try {
                // Try IP-based geolocation first (using ipapi.co free API)
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();

                // Store timezone for time-based greetings
                if (data.timezone) {
                    sessionStorage.setItem('userTimezone', data.timezone);
                }

                // Get weather data for conversational context - WAIT for it to complete
                if (data.latitude && data.longitude) {
                    await fetchWeatherContext(data.latitude, data.longitude);
                }

                if (data.region || data.city) {
                    return data.city && data.region ? `${data.city}, ${data.region}` : (data.region || data.city);
                }
            } catch (error) {
                console.log('Location detection unavailable');
            }
            return '';
        }

        async function fetchWeatherContext(lat, lon) {
            try {
                // Use wttr.in for simple weather data (no API key needed)
                const response = await fetch(`https://wttr.in/${lat},${lon}?format=j1`);
                const data = await response.json();

                if (data.current_condition && data.current_condition[0]) {
                    const current = data.current_condition[0];
                    const tempF = current.temp_F;
                    const weatherDesc = current.weatherDesc[0].value.toLowerCase();

                    sessionStorage.setItem('userWeatherTemp', tempF);
                    sessionStorage.setItem('userWeatherDesc', weatherDesc);
                }
            } catch (error) {
                console.log('Weather detection unavailable');
            }
        }

        async function startConversation() {
            await pause(1000);

            // Check if returning visitor
            const existingName = sessionStorage.getItem('userName');
            const existingEmail = sessionStorage.getItem('userEmail');

            if (existingName) {
                // Returning visitor flow
                userName = existingName;
                userEmail = existingEmail || '';
                userLocation = sessionStorage.getItem('userLocation') || '';

                const msg1 = addMessage('');
                await type(msg1, `Welcome back, ${userName}!`);

                await pause(1200);

                const msg2 = addMessage('');
                await type(msg2, 'Which industry would you like to explore today?');

                await pause(500);
                showIndustryButtons();
                return;
            }

            // New visitor flow
            const msg1 = addMessage('');
            await type(msg1, 'Hello, I am Claire.');

            await pause(800);

            // Show typing indicator while detecting location
            showTypingIndicator();

            // Detect location and WAIT for it to complete
            userLocation = await detectLocation();
            if (userLocation) {
                sessionStorage.setItem('userLocation', userLocation);
            }

            // Remove typing indicator
            removeTypingIndicator();

            const msg2 = addMessage('');
            await type(msg2, 'What is your name?');

            await pause(500);
            showNameInput();
        }

        function showNameInput() {
            const inputContainer = document.createElement('div');
            inputContainer.className = 'chat-message';

            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'input-field';
            input.placeholder = 'Enter your name...';
            input.autocomplete = 'off';

            input.addEventListener('keypress', async (e) => {
                if (e.key === 'Enter' && input.value.trim()) {
                    userName = input.value.trim();
                    input.disabled = true;

                    const userMsg = addMessage(userName, 'user');

                    await pause(800);
                    await respondToName();
                }
            });

            inputContainer.appendChild(input);
            document.getElementById('chat-box').appendChild(inputContainer);
            input.focus();
        }

        async function respondToName() {
            const msg = addMessage('');
            if (userLocation) {
                await type(msg, `Thank you, ${userName} from ${userLocation}.`);
            } else {
                await type(msg, `Thank you, ${userName}.`);
            }

            await pause(1200);

            const msg2 = addMessage('');
            await type(msg2, 'Which industry shall we orchestrate today?');

            await pause(500);
            showIndustryButtons();
        }

        function showIndustryButtons() {
            const btnContainer = document.createElement('div');
            btnContainer.className = 'industry-grid';

            const industries = [
                {
                    name: 'Healthcare',
                    desc: 'Hospitals, clinics, practices',
                    path: '/healthcare/'
                },
                {
                    name: 'Legal Services',
                    desc: 'Law firms, legal practices',
                    path: '/legal/'
                },
                {
                    name: 'Financial Services',
                    desc: 'Banks, fintech, wealth management',
                    path: '/finance/'
                },
                {
                    name: 'Hospitality',
                    desc: 'Hotels, restaurants, travel',
                    path: '/hospitality/'
                }
            ];

            industries.forEach(industry => {
                const btn = document.createElement('button');
                btn.className = 'industry-btn';
                btn.innerHTML = `
                    <div class="industry-name">${industry.name}</div>
                    <div class="industry-desc">${industry.desc}</div>
                `;
                btn.onclick = () => selectIndustry(industry.name, industry.path);
                btnContainer.appendChild(btn);
            });

            const msgContainer = document.createElement('div');
            msgContainer.className = 'chat-message';
            msgContainer.appendChild(btnContainer);

            document.getElementById('chat-box').appendChild(msgContainer);
        }

        async function selectIndustry(industryName, path) {
            // Show user selection
            const userMsg = addMessage(industryName, 'user');

            await pause(800);

            // If returning visitor with existing email, skip to redirect
            if (userEmail && userEmail.trim()) {
                const msg = addMessage('');
                await type(msg, `Excellent. Let's orchestrate your ${path.split('/')[1]} workflows, ${userName}.`);

                await pause(1200);
                window.location.href = path;
                return;
            }

            // New visitor - ask for email
            const msg = addMessage('');
            await type(msg, `Perfect. May I have your email to personalize your experience?`);

            await pause(500);
            showEmailInput(path);
        }

        function showEmailInput(path) {
            const inputContainer = document.createElement('div');
            inputContainer.className = 'chat-message';

            const input = document.createElement('input');
            input.type = 'email';
            input.className = 'input-field';
            input.placeholder = 'Enter your email...';
            input.autocomplete = 'email';

            input.addEventListener('keypress', async (e) => {
                if (e.key === 'Enter' && input.value.trim()) {
                    userEmail = input.value.trim();
                    input.disabled = true;

                    const userMsg = addMessage(userEmail, 'user');

                    await pause(800);
                    await finalizeAndRedirect(path);
                }
            });

            inputContainer.appendChild(input);
            document.getElementById('chat-box').appendChild(inputContainer);
            input.focus();
        }

        async function finalizeAndRedirect(path) {
            // Store all user data
            sessionStorage.setItem('userName', userName);
            sessionStorage.setItem('userEmail', userEmail);
            if (userLocation) {
                sessionStorage.setItem('userLocation', userLocation);
            }

            const msg = addMessage('');
            await type(msg, `Excellent. Let's orchestrate your ${path.split('/')[1]} workflows, ${userName}.`);

            await pause(1200);

            // Redirect to industry landing page
            window.location.href = path;
        }

        // Start the conversation when page loads
        window.addEventListener('load', () => {
            startConversation();
        });
    </script>
</body>
</html>
